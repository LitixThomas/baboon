<div class="beige-noise">
    <div class="p-wrapper">
        <h3 style="vertical-align: middle;">
            Beispiele für Sessions in Baboon
        </h3>
        <p>
            Sessions werden in Baboon vom Server mit den Parametern aus der config/app.conf.json erzeugt und verwaltet.
            Baboon beinhaltet Clientseitig einen Session-Service. Über diesen Service kann der Client mit der Session interagieren.
            Hier finden Sie Beispiele wie dies funktioniert. Eine vollständige Dokumentation der Sessions in Baboon finden Sie
            unter: <a href="http://litixsoft.de/documentation/baboon/sessions">Baboon Session Dokumentation</a>.
        </p>

    <h4>Aktivität der Session melden</h4>
    <p>
        Eine Singlepage Anwendung wird einmal an den Client ausgeliefert und erzeugt keinen neuen Request.
        Das ist für die Session ein Problem, da zwangsläufig die Inaktivitätszeit überschritten wird. Um das zu vermeiden
        meldet die Clientseite von baboon bei jeder Änderung der Route eine Aktivität an den Server.
    </p>
<pre class="prettyprint">
// app.js

$rootScope.$on('$routeChangeStart', function () {
            session.setActivity();
        });
</pre>
    <p>
        Es kann auch vorkommen, dass in einem Anwendungsfall der Benutzer lange Zeit das '$routeChangeStart' Event
        nicht auslöst. In diesem Fall können Sie die Meldung an den Server auch manuell auslösen.
    </p>

<pre class="prettyprint">
    controller('sessionDocCtrl', ['$scope', 'session', '$log', function ($scope, session, $log) {

        $scope.activityMsg = [];

        $scope.getLastActivity = function() {
            session.getLastActivity(function(err, data) {
                if(err) {
                    $log.error(err);
                    $scope.activityMsg.push(err);
                }
                else {
                    var now = new Date(data.activity);
                    $scope.activityMsg.push('last activity is ' + now);
                }
            });
        };
        $scope.setActivity = function(){
            var now = new Date();
            $scope.activityMsg.push('set activity to ' + now);
            session.setActivity();
        };
        $scope.clearActivityMsg = function() {
            $scope.activityMsg = [];
        };
    }]);
</pre>

        <p>
            <button class="btn btn-info" ng-click="setActivity()">Set activity</button>
            <button class="btn btn-info" ng-click="getLastActivity()">Get last activity</button>
        </p>

        <ul>
            <li ng-repeat="item in activityMsg">
                {{item}}
            </li>
        </ul>
        <p>
            <button class="btn btn-info" ng-click="clearActivityMsg()">Clear Messages</button>
        </p>

        <h4>Daten in der Session speichern</h4>
        <p>
            Sie können über den Session-Service vom Client aus Daten in der Session speichern.
            Baboon verwendet zum speichern in der Session den Container data. Alle Daten vom Client werden innerhalb des
            Containers session.data abgelegt.
        </p>

        <h4>Daten aus der Session lesen </h4>
        <p>
            ss
        </p>
    </div>
</div>