
<div class="beige-noise">
  <div class="p-wrapper">
    <div class="container"></div>
    <div class="row">
      <div class="col-sm-12">
        <section id="exports">
          <h1>exports</h1>
          <h5 class="subheader"></h5>
          <p>
            <!--mixin labelForSymbolType(symbol)--><span class="label label-info radius ctx-type">method</span><span>module.exports()</span>
          </p>
        </section>
        <div class="bs-example">
          <table class="table">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>syslog</td>
                <td>!Object</td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>
        <tabset>
          <tab heading="Description">
            <div class="well"><p>@param {!Object} config</p>
            </div>
          </tab>
          <tab heading="Source">
            <div hljs="hljs">module.exports = function (config, syslog) {

    var appName = config.app_name;
    var env = config.node_env;
            </div>
          </tab>
        </tabset>
        <hr/>
        <section id="errorHandler">
          <h1>errorHandler</h1>
          <h5 class="subheader"></h5>
          <p>
            <!--mixin labelForSymbolType(symbol)--><span class="label label-info radius ctx-type">function</span><span>errorHandler()</span>
          </p>
        </section>
        <div class="bs-example">
          <table class="table">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td></td>
                <td>err</td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td>req</td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td>res</td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td>next</td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>
        <tabset>
          <tab heading="Description">
            <div class="well"><p>Error handler for express server</p>
            </div>
          </tab>
          <tab heading="Source">
            <div hljs="hljs">var errorHandler = function (err, req, res, next) {

        next = null;

        var errorTitle = 'Error: ' + appName;
        var errorCode = 500;
        var errorMessage = 'Internal server error';
        var errorStack = [];

        // overwrite statusCode and errorMessage
        if (env === 'development' || err.displayClient) {

            if (err.status &amp;&amp; err.message) {
                errorCode = err.status;
                errorMessage = err.message;
            }
        }

        // define errorStack only in development mode
        if (env === 'development') {
            errorStack = err.stack;
        }

        // log error
        syslog.error(err.stack);

        // html for error page
        var html = '&lt;html&gt;&lt;head&gt;&lt;meta charset=\'utf-8\'&gt;&lt;title&gt;' + errorTitle + '&lt;/title&gt;' +
            '&lt;style&gt;*{margin:0;padding:0;outline:0}body{padding:80px 100px;font:13px &quot;Helvetica Neue&quot;,&quot;Lucida Grande&quot;,&quot;Arial&quot;;' +
            'background:#ece9e9 -webkit-gradient(linear,0 0,0 100%,from(#fff),to(#ece9e9));' +
            'background:#ece9e9 -moz-linear-gradient(top,#fff,#ece9e9);background-repeat:no-repeat;color:#555;' +
            '-webkit-font-smoothing:antialiased}h1,h2,h3{font-size:22px;color:#343434}h1 em,h2 em{padding:0 5px;' +
            'font-weight:normal}h1{font-size:60px}h2{margin-top:10px}h3{margin:5px 0 10px 0;padding-bottom:5px;' +
            'border-bottom:1px solid #eee;font-size:18px}ul li{list-style:none}ul li:hover{cursor:pointer;' +
            'color:#2e2e2e}p{line-height:1.5}a{color:#555;text-decoration:none}a:hover{color:#303030}#stacktrace{margin-top:15px}@media(max-width:768px){body{font-size:13px;' +
            'line-height:16px;padding:0}}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=&quot;wrapper&quot;&gt; &lt;h1&gt;' + appName + '&lt;/h1&gt; ' +
            '&lt;h2&gt;&lt;em&gt;' + errorCode + '&lt;/em&gt;' + errorMessage + '&lt;/h2&gt; &lt;ul id=&quot;stacktrace&quot;&gt;' + errorStack + '&lt;/ul&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;';

        res.setHeader('Content-Type', 'text/html; charset=utf-8');
        res.end(html);
    };

    return {
        errorHandler: errorHandler
    };
};
            </div>
          </tab>
        </tabset>
        <hr/>
      </div>
    </div>
  </div>
</div>