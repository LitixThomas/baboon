
<div class="beige-noise">
  <div class="p-wrapper">
    <div class="container"></div>
    <div class="row">
      <div class="col-sm-12">
        <section id="exports">
          <h1>exports</h1>
          <h5 class="subheader"></h5>
          <p>
            <!--mixin labelForSymbolType(symbol)--><span class="label label-info radius ctx-type">method</span><span>module.exports()</span><span title="return value" class="glyphicon glyphicon-arrow-right"></span><span>Object</span>
          </p>
        </section>
        <div class="bs-example">
          <table class="table">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>config</td>
                <td>Object</td>
                <td>The config object.</td>
              </tr>
            </tbody>
          </table>
        </div>
        <tabset>
          <tab heading="Description">
            <div class="well"><p>The logging module.</p>
            </div>
          </tab>
          <tab heading="Source">
            <div hljs="hljs">module.exports = function (config) {

    // check parameter
    if (typeof config !== 'object') {
        throw new LogError('Parameter config is required and must be a string type!');
    }

    var loggers = {};
    var logPath = config.path.logs;
    var maxLogSize = config.logging.appenders.file.maxLogSize;
    var backups = config.logging.appenders.file.backups;
    var appenders = [];
            </div>
          </tab>
        </tabset>
        <hr/>
        <section id="setAppender">
          <h1>setAppender</h1>
          <h5 class="subheader"></h5>
          <p>
            <!--mixin labelForSymbolType(symbol)--><span class="label label-info radius ctx-type">function</span><span>setAppender()</span>
          </p>
        </section>
        <div class="bs-example">
          <table class="table">
            <thead>
              <tr>
                <th style="width:20%">Option name</th>
                <th style="width:20%">Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>appender</td>
                <td>String</td>
                <td>The type of logging</td>
              </tr>
              <tr>
                <td>category</td>
                <td>String</td>
                <td>The name of logging file or collection name</td>
              </tr>
            </tbody>
          </table>
        </div>
        <tabset>
          <tab heading="Description">
            <div class="well"><p>Set appender for logging and audit</p>
            </div>
          </tab>
          <tab heading="Source">
            <div hljs="hljs">var setAppender = function(appender, category) {

        // check appender type
        switch(appender){
            case 'log4js-node-mongodb':
                // push db appender
                appenders.push(
                    {
                        type: 'log4js-node-mongodb',
                        connectionString: config.logging.appenders.db,
                        collectionName: category,
                        write: 'save',
                        category: category
                    }
                );
                break;
            case 'file':
                // push file appender
                appenders.push(
                    {
                        type: 'file',
                        filename: logPath + '/' + category + '/' + category + '.log',
                        maxLogSize: maxLogSize,
                        backups: backups,
                        category: category
                    }
                );

                // create directory if not exists
                if (!fs.existsSync(logPath + '/' + category)) {
                    fs.mkdirSync(logPath + '/' + category);
                }

                break;
            default:
                // push console as default appender
                appenders.push({type: 'console', category: category});
        }
    };

    // set appenders
    lxHelpers.objectForEach(config.logging.loggers, function(key, value) {
            </div>
          </tab>
        </tabset>
        <hr/>
        <tabset>
          <tab heading="Description">
            <div class="well"><p>@namespace value.active</p>
            </div>
          </tab>
          <tab heading="Source">
            <div hljs="hljs">if (value.active) {
            </div>
          </tab>
        </tabset>
        <hr/>
        <tabset>
          <tab heading="Description">
            <div class="well"><p>@namespace value.appender</p>
            </div>
          </tab>
          <tab heading="Source">
            <div hljs="hljs">setAppender(value.appender, key);
        }
        else {
            console.log(clc.yellow('   warning  - ') + 'logger ' + key + ' is inactive');
        }
    });

    // configure log4js
    log4js.configure({
        appenders: appenders
    });

    // create loggers
    lxHelpers.objectForEach(config.logging.loggers, function(key) {
        loggers[key] = log4js.getLogger(key);
        loggers[key].setLevel(config.logging.loggers[key].level);
    });


    return loggers;
};
            </div>
          </tab>
        </tabset>
        <hr/>
      </div>
    </div>
  </div>
</div>